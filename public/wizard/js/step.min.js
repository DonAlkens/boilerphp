var stepLength=()=>$("[step-id]").length;function badgeClick(){$("[step-badge]").click((function(){index=$(this).attr("step-badge"),index=Number(index);let current=currentIndex($(".step-next"));current=Number(current);let change=!0;if(index>current){for(let i=1;i<index;i++)validateCurrentStep(i)?(stepCompleted(i),next(i)):(stepError(i),change=!1);change&&next(index-1)}else if(index<current)for(let i=1;i<current&&(previous(current-i),current-i!=index);i++);}))}function validateCurrentStep(current){var valid=!0,fields;return $('[step-id="'+current+'"]').children().find('[step-field-required="true"]').each((function(){if($(this).css("border-color","#dcdcdc").siblings('[step-validation-result="true"]').remove(),""===$(this).val()){var message=$(this).attr("step-validation-message");$(this).css("border-color","red").after('<span class="text-danger step-validation-message" step-validation-result="true">'+message+"</span>"),valid=!1}})),valid}var currentIndex=nextObject=>nextObject.attr("step-current");function nextAction(){$(".step-next").click((function(){let current=currentIndex($(this));validateCurrentStep(current)?(stepCompleted(current),next(current)):stepError(current)}))}function nextStep(current,index){$('[step-id="'+current+'"]').fadeOut().removeClass("active").removeClass("show").addClass("hide"),$('[step-id="'+index+'"]').removeClass("hide").fadeIn().attr("class","show active"),setNextIndex(index),activeBadge(index)}function setNextIndex(index){index<stepLength()&&submitButton(!1),$(".step-next").attr("step-current",index)}function next(current){let index=Number(current)+1;index==stepLength()&&submitButton(!0),index<=stepLength()&&(index>1&&setPreviousButton(current),nextStep(current,index))}function previousAction(){$(".step-previous").click((function(){let index;previous($(this).attr("step-page"))}))}function previous(index){let current;index=Number(index),$('[step-id="'+(index+1)+'"]').fadeOut().removeClass("active").removeClass("show").addClass("hide"),$('[step-id="'+index+'"]').removeClass("hide").fadeIn().attr("class","show active"),setPreviousButton(index-1),setNextIndex(index),resetBadge(index+1),activeBadge(index)}function resetBadge(index){$('[step-badge="'+index+'"]').removeClass(["active","completed","error"])}function activeBadge(index){$('[step-badge="'+index+'"]').removeClass(["error","completed"]).addClass("active")}function stepCompleted(current){$('[step-badge="'+current+'"]').removeClass("active").removeClass("error").addClass("completed")}function stepError(current){$('[step-badge="'+current+'"]').addClass("error"),stepModal("error","Some required fields are not filled correctly.")}function stepModal(mode,message,iconClass=null){let iconError,iconSuccess,icon="success"==mode?'<i class="step-icon '+(null!==iconClass?iconClass:"mdi mdi-check-circle-outline")+' success"></i>':'<i class="step-icon '+(null!==iconClass?iconClass:"mdi mdi-alert-circle-outline")+'"></i>';$("body").append('<div class="step-overlay"><div class="step-modal-box"><div class="text-center">'+icon+'<p class="step-message">'+message+'</p><button class="step-close btn btn-primary">Close</button></div></div></div>'),closePopUpAction()}function stepLoading(state,message=null){state?$("body").append('<div class="step-overlay text-center" step-loading="true"><div class="step-loading"><div class="d-flex justify-content-center"><div class="spinner-grow text-primary" role="status"><span class="sr-only text-white"></span></div></div><p class="text-center text-white">'+message+"</p></div></div>"):$('[step-loading="true"]').remove()}function closePopUpAction(){$(".step-close").click((function(){$(".step-overlay").fadeOut().remove()}))}function submitButton(state){state?($(".step-next").hide(),$(".step-submit").show()):($(".step-next").show(),$(".step-submit").hide())}function stepSubmit(){$(".step-submit").click((function(event){current=$("[step-id]").length,validateCurrentStep(current)?submitForm():(event.preventDefault(),stepError(current))}))}function submitForm(){$(".step-form")[0].submit()}function setPreviousButton(index){0==index?$(".step-previous").removeAttr("step-page").hide():$(".step-previous").attr("step-page",index).show()}function initActions(){$(".step-submit").hide(),$(".step-previous").hide(),$(".step-next").attr("step-current","1")}function init(){initActions(),badgeClick(),nextAction(),previousAction(),stepSubmit()}function Step(){}Step.prototype.init=function(){return init()},Step.prototype.modal=function(mode,message){return stepModal(mode,message)},Step.prototype.loader=function(state,message=null){return stepLoading(state,message)};