@{{extends "shared/layout"}}

<div class="col-md-12 breadcomb p-0">
    <div class="col-md-12 bg-white p-2">
        <a href="/" class=""><small> Home / </small></a>
        @if(~breadcumb~)
            {{$breadcumbs = ~breadcumb~}}
            @foreach($breadcumbs as $breadcumb)
                @foreach($breadcumb as $bread => $link)
                <a href="@{{$link}}" class="mr-2"><small> @{{$bread}} / </small></a>
                @endforeach
            @endforeach
        @endif
    </div>
</div>

<div class="banner col-md-12">
    <div class="row">
        <div class="col-md-12 slide-wrapper p-0">
            <div class="slideshow owl-carousel">
                <div class="slider no-radius">
                    <img src="/public/image/sliders/slider-1-1530x550.jpg" alt="" width="100%" height="250px">
                </div>
                <div class="slider no-radius">
                    <img src="/public/image/sliders/slider-2-1530x550.jpg" alt="" width="100%" height="250px">
                </div>
            </div>
        </div>
    </div>
</div>

<section class="content-page bg-white">

    @{{load "shared/_shop-sidebar"}}

    <div class="content">
        <div class="content-inner bg-white p-2">    
            <div class="super-sales col-md-12 bg-white">
                <div class="row sales-header border-bottom mb-3">
                    <div class="col-md-7 p-0">
                        <h1 class="page-heading p-2">
                            @{{~heading~}}
                            <small class="text-secondary" style="font-size:12px;">@{{~count~}} product(s)
                                found</small>
                        </h1>
                    </div>
                    <div class="col-md-5 side-actions text-right">
                        <div class="d-flex justify-content-between">
                            <div class="mobile-filter p-2 mt-1 text-left">
                                <a class=""><i class="icofont-filter"></i> <small>Filter</small></a>
                            </div>
                            <div class="d-flex p-2 justify-content-end">
                                <div class="sort-label mt-2 mr-1">
                                    <h6>Sort by: </h6>
                                </div>
                                <div class="filter-form">
                                    <select name="sort" id="sort" class="selectpicker" data-live-search="false">
                                        <option value="Latest">Latest</option>
                                        <option value="Popularity">Popularity</option>
                                        <option value="price-low-to-high">Price: low to high</option>
                                        <option value="price-high-to-low">Price: high to low</option>
                                    </select>
                                </div>
                                <div class="view-mode-actions ml-3">
                                    <a class="active"><i class="icofont-listing-box"></i></a>
                                    <a class=""><i class="icofont-listing-box"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if(~products~)
                <div class="row">
                    {{$products = ~products~}}
                    @foreach($products as $product)
                    <div class="col-md-4 col-sm-4 si_box col-xs-4 mb-4">
                        <div class="sale-item">
                            @if($product->discount_price > 0)
								<span class="discount-badge">-@{{$product->discount}}%</span>
							@endif
                            <div class="sales-img">
                                <a href="/pd/@{{$product->slug.'/'.base64_encode($product->id)}}">
                                    <img src="/src/images/@{{$product->images()->main}}" alt="" width="100%" data-img-label="@{{$product->id}}">
                                </a>
                            </div>
                            @if($product->variation_colors() != null)
                                <div class="sales-var-colors d-flex p-1">
                                    {{$colors = $product->variation_colors()}}
                                    {{$index = 0}}
                                    @foreach($colors as $color)
                                        @if($color["image"] != null)
                                            <div class="color-sm-circle  border-50 mr-2 @{{($index == 0) ? 'active' : null}}" 
                                            data-vars-img-mode="/src/images/@{{$color['image']}}" data-cot-label="@{{$product->id}}">
                                                <img src="/src/images/@{{$color['image']}}" alt="" data-mg-fr="@{{$color['color']}}" class="border-50">
                                            </div>
                                        @else
                                            {{$c = strtolower($color["color"])}}
                                            <div class="color-sm-circle border-50 mr-2 @{{~app_colors~[$c]}} @{{($index == 0) ? 'active' : null}}"></div>
                                        @endif
                                        {{$index++}}
                                    @endforeach
                                </div>
                            @else 
                                <div class="pt-4 mt-2"></div>
                            @endif
                            <div class="sales-details">
                                <a href="/pd/@{{$product->slug.'/'.base64_encode($product->id)}}">
                                    <span class="product-brand-name">
										<strong>@{{ucfirst($product->brand)}}</strong>
									</span>
                                    <p class="item-name m-0"><small>@{{$product->name}}</small></p>
                                </a>
                                <p class="rate" app-rating="0"></p>
                                <div class="d-flex pt-2">
                                    @if($product->price_range() != null)
                                    {{$prices = $product->price_range()}}
                                    <small class="mr-1"><b>&#8358;@{{number_format($prices["lowest"])}} - &#8358;@{{number_format($prices["highest"])}}</b></small>
                                    @elif($product->discount_price > 0)
                                    <small class="mr-1"><b>&#8358;@{{number_format((int)$product->discount_price)}}</b></small>
                                    <small class="text-secondary"><del>&#8358;@{{number_format((int)$product->price)}}</del></small>
                                    @else 
                                    <small class="mr-1"><b>&#8358;@{{number_format((int)$product->price)}}</b></small>
                                    @endif
                                </div>
                            </div>
                            <div class="sales-actions mt-3">
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-outline-primary btn-sm mr-1 border-50" data-prepare-cart="@{{$product->id}}">
                                        <i class="pe-7s-cart"></i> Add to cart
                                    </button>
                                    <button class="btn btn-light btn-sm border-50">
                                        <i class="pe-7s-refresh-2"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    @endforeach
                </div>
                @else
    
                <div class="row">
                    <div class="col-md-12 p-5 mt-5 mb-5 text-center">
                        <p class="text-secondary">No Product(s) found. Please Check back later</p>
                    </div>
                </div>
    
                @endif
            </div>
        </div>

        
    </div>
</section>

<div style="clear: both;"></div>